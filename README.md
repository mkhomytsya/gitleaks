# Gitleaks Pre-commit Hook

Git pre-commit hook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ —ñ —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö –ø–µ—Ä–µ–¥ commit'–æ–º. –ó–∞–ø–æ–±—ñ–≥–∞—î –≤–∏–ø–∞–¥–∫–æ–≤–æ–º—É commit'—É –ø–∞—Ä–æ–ª—ñ–≤, API –∫–ª—é—á—ñ–≤, —Ç–æ–∫–µ–Ω—ñ–≤ —Ç–∞ —ñ–Ω—à–æ—ó –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞–Ω—É—î staged —Ñ–∞–π–ª–∏ –ø–µ—Ä–µ–¥ commit'–æ–º
- üì¶ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î gitleaks –¥–ª—è Linux, macOS —Ç–∞ Windows
- ‚öôÔ∏è –õ–µ–≥–∫–æ –≤–º–∏–∫–∞—î—Ç—å—Å—è/–≤–∏–º–∏–∫–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ git config
- üé® –ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥ –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ
- üöÄ –ü—ñ–¥—Ç—Ä–∏–º—É—î —Ä—ñ–∑–Ω—ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ (x64, arm64)

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone https://github.com/mkhomytsya/gitleaks.git
cd gitleaks
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ö—É–∫–∞

–°–∫–æ–ø—ñ—é–π—Ç–µ pre-commit hook —É –≤–∞—à –ø—Ä–æ–µ–∫—Ç:

```bash
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤–∞—à–æ–≥–æ git –ø—Ä–æ–µ–∫—Ç—É
cd /—à–ª—è—Ö/–¥–æ/–≤–∞—à–æ–≥–æ/–ø—Ä–æ–µ–∫—Ç—É

# –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é hooks —è–∫—â–æ –≤–æ–Ω–∞ –Ω–µ —ñ—Å–Ω—É—î
mkdir -p .git/hooks

# –°–∫–æ–ø—ñ—é–π—Ç–µ —Ö—É–∫
cp /—à–ª—è—Ö/–¥–æ/gitleaks/hooks/pre-commit .git/hooks/pre-commit

# –ó—Ä–æ–±—ñ—Ç—å —Ö—É–∫ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º
chmod +x .git/hooks/pre-commit
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ö—É–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É commit'—ñ:

```bash
git add .
git commit -m "Your commit message"
```

–Ø–∫—â–æ gitleaks –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π, —Ö—É–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å —ñ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –π–æ–≥–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É.

### –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–í–∏–º–∫–Ω–µ–Ω–Ω—è —Ö—É–∫–∞

–•—É–∫ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π. –ö–µ—Ä—É–≤–∞–Ω–Ω—è:

```bash
# –í–∏–º–∫–Ω—É—Ç–∏ —Ö—É–∫
git config --bool hooks.gitleaks false

# –£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ö—É–∫
git config --bool hooks.gitleaks true

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
git config --bool hooks.gitleaks
```

### –©–æ —Ä–æ–±–∏—Ç–∏, —è–∫—â–æ –≤–∏—è–≤–ª–µ–Ω–æ —Å–µ–∫—Ä–µ—Ç–∏

–Ø–∫—â–æ —Ö—É–∫ –≤–∏—è–≤–∏–≤ —Å–µ–∫—Ä–µ—Ç–∏:

1. **–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –≤–∏–≤—ñ–¥** - —Ö—É–∫ –ø–æ–∫–∞–∂–µ —Ñ–∞–π–ª–∏ —ñ —Ä—è–¥–∫–∏ –∑ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
2. **–í–∏–¥–∞–ª—ñ—Ç—å —Å–µ–∫—Ä–µ—Ç–∏** - –∑–∞–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—ñ, –∫–ª—é—á—ñ —Ç–∞ —Ç–æ–∫–µ–Ω–∏ –Ω–∞:
   - –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
   - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏ (–¥–æ–¥–∞–Ω—ñ –¥–æ `.gitignore`)
   - –°–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (Vault, AWS Secrets Manager —Ç–æ—â–æ)
3. **–°–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É** - –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è commit –ø—Ä–æ–π–¥–µ —É—Å–ø—ñ—à–Ω–æ

```bash
# –ü—Ä–∏–∫–ª–∞–¥: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–∂–µ–Ω–∏—Ö —Å–µ–∫—Ä–µ—Ç—ñ–≤
# –ü–æ–≥–∞–Ω–æ:
api_key = "sk_live_12345678"

# –î–æ–±—Ä–µ:
api_key = os.getenv("API_KEY")
```

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–≤–æ–¥—É

### ‚úÖ –£—Å–ø—ñ—à–Ω–∏–π commit (—Å–µ–∫—Ä–µ—Ç–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ)

```
üîç Running gitleaks to check for secrets...
‚úì No secrets detected!
```

### ‚ùå –í–∏—è–≤–ª–µ–Ω–æ —Å–µ–∫—Ä–µ—Ç–∏

```
üîç Running gitleaks to check for secrets...

Finding:     api_key = "sk_live_12345678"
Secret:      sk_live_************************
RuleID:      generic-api-key
Entropy:     3.5
File:        config.py
Line:        15

‚ùå Gitleaks detected secrets in your staged files!
   Commit has been blocked to prevent secrets from being committed.

üìã What to do:
   1. Remove the secrets from your files
   2. Use environment variables or secret management tools
   3. Review the output above for specific locations

   To disable this hook: git config --bool hooks.gitleaks false
```

## –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏

- Git
- Bash
- curl (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è gitleaks)
- –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –û–°: Linux, macOS, Windows (Git Bash/WSL)
- –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏: x64, arm64

## –†—É—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Gitleaks

–Ø–∫—â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å gitleaks –≤—Ä—É—á–Ω—É:

### Linux/macOS (—á–µ—Ä–µ–∑ Homebrew)

```bash
brew install gitleaks
```

### Linux (—á–µ—Ä–µ–∑ –ø—Ä—è–º–∏–π download)

```bash
VERSION="8.30.0"
ARCH="x64"  # –∞–±–æ arm64
wget https://github.com/gitleaks/gitleaks/releases/download/v${VERSION}/gitleaks_${VERSION}_linux_${ARCH}.tar.gz
tar -xzf gitleaks_${VERSION}_linux_${ARCH}.tar.gz
sudo mv gitleaks /usr/local/bin/
```

### Windows (—á–µ—Ä–µ–∑ Chocolatey)

```powershell
choco install gitleaks
```

## –ì–ª–æ–±–∞–ª—å–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤

–©–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π —Ö—É–∫ –¥–ª—è –≤—Å—ñ—Ö –≤–∞—à–∏—Ö git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤:

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è —Ö—É–∫—ñ–≤
mkdir -p ~/.git-templates/hooks

# –°–∫–æ–ø—ñ—é–π—Ç–µ —Ö—É–∫
cp hooks/pre-commit ~/.git-templates/hooks/

# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ git –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π template
git config --global init.templateDir ~/.git-templates

# –î–ª—è —ñ—Å–Ω—É—é—á–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:
cd /your/existing/repo
git init
```

## Troubleshooting

### –•—É–∫ –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
ls -la .git/hooks/pre-commit
# –ú–∞—î –±—É—Ç–∏ -rwxr-xr-x

# –Ø–∫—â–æ –Ω—ñ, –∑—Ä–æ–±—ñ—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º:
chmod +x .git/hooks/pre-commit
```

### Gitleaks –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å curl
curl --version

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è
ping github.com

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å gitleaks –≤—Ä—É—á–Ω—É (–¥–∏–≤. –≤–∏—â–µ)
```

### Bypass —Ö—É–∫–∞ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è)

```bash
# –¢—ñ–ª—å–∫–∏ –¥–ª—è –µ–∫—Å—Ç—Ä–µ–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤!
git commit --no-verify -m "Emergency commit"
```

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License

## –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- [Gitleaks](https://github.com/gitleaks/gitleaks) - –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
- [Git Hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è